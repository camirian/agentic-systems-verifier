# Requirements Trace: Section 3.2 (HDTN Bundle Requirements)

> [!NOTE]
> The user requested "Section 3.2 (Buffer Management)". The actual title of Section 3.2 in TM-20240011318.pdf is "HDTN Bundle Requirements". The requirements below are extracted from this section, focusing on Bundle Protocol Version 6 (BPv6) and Version 7 (BPv7) as they dictate the structure and management of data buffers.

## 3.2.1 Bundle Protocol Version 6 (BPv6) Requirements

| Req ID       | Title                               | Requirement                                                                                                                                                                                              | Verification Status                                             |
| :----------- | :---------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------- |
| **BPv6-001** | URI Scheme Specific Part            | The Scheme Specific Part of every URI defined within the InterPlaNet ("ipn") scheme shall comprise: 1. The node number of the URI. 2. An ASCII period ('.') character. 3. The service number of the URI. | ✅ Verified (Implicit in `test_bpv6_creation_and_serialization`) |
| **BPv6-002** | CBHE Unit                           | A compressed primary block shall contain integers for its fields.                                                                                                                                        | ✅ Verified (`test_bpv6_creation_and_serialization`)             |
| **BPv6-003** | CBHE Encoding of EID                | A compressed primary block shall, in order, contain: 1. Dest Node, 2. Dest Service, 3. Source Node, 4. Source Service, 5. Report-to Node, 6. Report-to Service, 7. Custodian Node, 8. Custodian Service. | ✅ Verified (`test_bpv6_creation_and_serialization`)             |
| **BPv6-004** | BP Time                             | DTN time shall consist of nanosecond precision since the start of the year 2000.                                                                                                                         | ✅ Verified (`test_bpv6_creation_and_serialization`)             |
| **BPv6-005** | LTP Bundle Encapsulation            | When utilizing LTP bundles, the bundle shall be entirely contained in a single LTP session of red-data.                                                                                                  | ⚠️ Not Verified (LTP not implemented)                            |
| **BPv6-008** | BP Bundle Structure                 | Bundles shall utilize SDNV encoding.                                                                                                                                                                     | ✅ Verified (`test_bpv6_creation_and_serialization`)             |
| **BPv6-009** | BP Bundle Block Structure           | Bundles shall be a concatenated sequence of two or more block structures.                                                                                                                                | ✅ Verified (`test_bpv6_creation_and_serialization`)             |
| **BPv6-010** | Primary Block Location              | The first block in the bundle shall be the primary bundle block.                                                                                                                                         | ✅ Verified (`test_bpv6_creation_and_serialization`)             |
| **BPv6-011** | Number of Primary Blocks            | A bundle shall have one primary bundle block.                                                                                                                                                            | ✅ Verified (`test_bpv6_creation_and_serialization`)             |
| **BPv6-016** | Constraining Bundle Fragmentation 1 | The concatenation of bundle fragments shall result in a payload identical to the fragmented bundle's payload.                                                                                            | ⚠️ Not Verified (Fragmentation not implemented)                  |
| **BPv6-020** | Bundle Fragmentation Order          | The relative order of the blocks present in a fragment shall be the same as in the bundle prior to fragmentation.                                                                                        | ⚠️ Not Verified (Fragmentation not implemented)                  |

## 3.2.2 Bundle Protocol Version 7 (BPv7) Requirements

| Req ID       | Title                      | Requirement                                                                                            | Verification Status                                                    |
| :----------- | :------------------------- | :----------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------- |
| **BPv7-001** | CBOR Encoding              | The data type for bundle block fields shall be CBOR unsigned integers.                                 | ✅ Verified (`test_cbor_utils`, `test_bpv7_creation_and_serialization`) |
| **BPv7-002** | Bundle Structure           | Bundles shall be a CBOR indefinite-length array.                                                       | ✅ Verified (`test_bpv7_creation_and_serialization`)                    |
| **BPv7-003** | Bundle Array Structure     | Bundle arrays shall have a length of at least two blocks.                                              | ✅ Verified (`test_bpv7_creation_and_serialization`)                    |
| **BPv7-004** | Block Order                | Block(s) following the primary block shall be a canonical block.                                       | ✅ Verified (`test_bpv7_creation_and_serialization`)                    |
| **BPv7-005** | Bundle Structure Stop Code | A CBOR "break" stop code, terminating the array, shall be directly after the payload block.            | ✅ Verified (`test_bpv7_creation_and_serialization`)                    |
| **BPv7-007** | Primary Bundle Location    | The first block in the bundle shall be a primary bundle block.                                         | ✅ Verified (`test_bpv7_creation_and_serialization`)                    |
| **BPv7-008** | Number of Primary Blocks   | A bundle shall have exactly one primary bundle block.                                                  | ✅ Verified (`test_bpv7_creation_and_serialization`)                    |
| **BPv7-009** | Payload Block Location     | The last bundle block shall be a payload block.                                                        | ✅ Verified (`test_bpv7_creation_and_serialization`)                    |
| **BPv7-010** | Number of Payload Blocks   | A bundle shall have exactly one payload block.                                                         | ✅ Verified (`test_bpv7_creation_and_serialization`)                    |
| **BPv7-015** | Keep CBOR Encoding Value   | The CBOR-encoded values of all fields in the primary block shall remain unchanged from point-to-point. | ✅ Verified (Implicit in serialization)                                 |
